<template name="spotsList">
	<div class="page-header">
		<div class="btn-group pull-right">
			<a href="{{pathFor 'newSpot'}}" class="btn btn-primary btn-lg"><i class="fa fa-plus"></i>&nbsp;new spot</a>
		</div>
		<h2><strong>Last spots added</strong></h2>
	</div>
	<div class="list-group">
		{{#each spots}}
		{{#with this}}
		<a href="{{pathFor 'viewSpot'}}" class="list-group-item">{{> spotItem}}</a>
		{{/with}}
		{{/each}}
	</div>
</template>

<template name="spotItem">
	<div class="media">
		<div class="media-left">
			<img class="media-object" src="{{pictureThumbnail}}" alt="{{name}}">
		</div>
		<div class="media-body">
			<h4 class="media-heading"><strong>{{name}}</strong></h4>
			<p>{{formatDate createdAt "calendar"}}</p>
		</div>
	</div>
</template>

<template name="viewSpot">
	<div class="page-header">
		<div class="btn-group pull-right">
			{{#with this}}
			<a href="{{pathFor 'editSpot'}}" class="btn btn-warning btn-lg" id="editBtn"><i class="fa fa-pencil"></i></a>
			{{/with}}
		</div>
		<h2><strong>{{name}}</strong></h2>
	</div>
	<img src="{{pictureSquare}}" class="img-responsive" alt="{{name}}">
</template>

<template name="newSpot">
	<div class="page-header">
		<div class="btn-group pull-right">
			<button type="button" class="btn btn-default btn-lg" id="cameraBtn"><i class="fa fa-camera-retro"></i></button>
		</div>
		<h2><strong>Create new spot</strong></h2>
	</div>
	{{#autoForm collection="Spots" id="insertSpotForm" type="insert"}}
	<fieldset>
		<div class="form-group {{#if afFieldIsInvalid name='picture'}}has-error{{/if}}">
			{{#if afFieldIsInvalid name='picture'}}
			<span class="help-block">{{afFieldMessage name='picture'}}</span>
			{{/if}}
		</div>
		{{#if spotPhotoSrc}}
		<div class="well well-lg">
			<img src="{{spotPhotoSrc}}" class="img-responsive" alt="Image">
		</div>
		{{/if}}
		<div class="form-group {{#if afFieldIsInvalid name='location'}}has-error{{/if}}">
			{{#if afFieldIsInvalid name='location'}}
			<span class="help-block">{{afFieldMessage name='location'}}</span>
			{{/if}}
		</div>
		<div class="well well-lg">
			{{> map}}
			<div class="pull-right">
				<strong>[{{userPosition.longitude}}, {{userPosition.latitude}}]</strong>
			</div>
		</div>
		{{> afQuickField name='name'}}
	</fieldset>
	<div class="btn-group">
		<button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-check-square-o"></i>&nbsp;Create</button>
	</div>
	{{/autoForm}}
</template>

<template name="editSpot">
	{{#autoForm collection="Spots" doc=this id="updateSpotForm" type="update"}}
	<div class="page-header">
		<div class="btn-group pull-right">
			<button type="button" class="btn btn-danger btn-lg" id="deleteSpot"><i class="fa fa-trash-o"></i></button>
		</div>
		<h2><strong>{{name}}</strong> <small>edit</small></h2>
	</div>
	<fieldset>
		{{> afQuickField name='name'}}
	</fieldset>
	<div class="btn-group">
		<button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-check-square-o"></i>&nbsp;Update</button>
	</div>
	{{/autoForm}}
</template>